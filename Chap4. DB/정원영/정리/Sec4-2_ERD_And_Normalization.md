# Chapter 4: 데이터베이스
## Section 4.2: ERD와 정규화 과정
- **ERD(Entity Relationship Diagram)**: DB를 구축할 때 가장 기초적인 뼈대 역할을 하며, 릴레이션 간의 관계들을 정의한 것이다.

### 4.2.1 ERD의 중요성
- 시스템을 설계할 때 요구 사항을 기반으로 ERD를 작성하고 이 ERD를 기반으로 DB를 구축한다.
- DB를 구축하고도 디버깅이나 비즈니스 프로세스 재설계를 하기 위해서 설계도 역할도 한다.
- ERD는 관계형 구조를 표현할 수 있는 데이터를 구성하는 데 유용할 수 있지만 비정형 데이터를 충분히 표현하기에는 힘들다.
  - 비정형 데이터: 비구조화 데이터를 말하며, 미리 정의된 데이터 모델이 없거나 미리 정의된 방식으로 정리되지 않은 정보를 말한다.

### 4.2.2 예제로 배우는 ERD
- 생략

### 4.2.3 정규화 과정
- **정규화 과정(Normalization)**: 릴세이션 간의 잘못된 종속 관계로 인해 데이터베이스 이상 현상이 일어나서 이를 해결하거나, 저장 공간을 효율적으로 사용하기 위해 릴레이션을 여러 개로 분리하는 과정을 말한다.
- 데이터베이스 **이상 현상(Anomaly)**: 정규화를 수행하지 않았을 때 발생하는 데이터 중복과 무결성 저하 현상을 말한다.
  - **삽입 이상(Insertion anomaly)**: 특정 데이터가 존재하지 않아 데이터를 DB에 삽입할 수 없는 현상을 말한다.
  - **삭제 이상(Deletion anomaly)**: 특정 정보를 삭제하면 원치 않는 정보도 삭제되는 현상을 말한다.
  - **갱신 이상(Update anomaly)**: 중복된 데이터 중 일부만 수정되어 데이터 모순이 일어나는 현상을 말한다.
- 정규화된 정도는 정규형(NF, Normal Form)으로 표현한다.
  - 기본 정규형: 제1정규형, 제2정규형, 제3정규형, 보이스/코드 정규형
  - 고급 정규형: 제4정규형, 제5정규형

#### 정규형 원칙
- 릴레이션의 의미가 같으되 더 좋은 구조를 가져야한다.
- 더 좋은 구조라 함은, 자료의 중복성은 감소하고, 독립적인 관계는 별개의 릴레이션으로 표현하고, 각각의 릴레이션은 독립적인 표현이 가능한 것을 말한다.

#### 제1정규형
- ***모든 도메인이 더 이상 분해될 수 없는 원자 값(Atomic value)만으로 구성***되어야 하는 것을 말한다.
- 릴레이션의 속성 값 중에서 한 개의 기본키에 대해 두 개 이상의 값을 가지는 반복집합이 있어서는 안된다.

#### 제2정규형
- 제1정규형에서 ***부분 함수의 종속성을 제거***한 형태를 말한다.
- 부분 함수의 종속성 제거: 기본키가 아닌 모든 속성이 기본키에 완전 함수 종속적인 것을 말한다.
- 릴레이션을 분해할 때 동등한 릴레이션으로 분해해야하고, 정보 손실이 발생하지 않는 무손실 분해로 분해되어야 한다.

#### 제3정규형
- 제2정규형에서 ***기본키가 아닌 모든 속성이 이행적 함수 종속(Transitive FD)를 만족하지 않는 상태***를 말한다.

##### 이행적 함수 종속
- 함수 종속에 대해 A에 대해 B가 함수 종속적이고 B에 대해 C가 함수 종속적이면 논리적으로 C는 A에 함수 종속적이 되며, 이를 이행적 함수 종속이라고 한다.

#### 보이스/코드 정규형(BCNF)
- 제3정규형에서 결정자가 후보키가 아닌 함수 종속 관계를 제거하여 릴레이션의 함수 종속 관계에서 ***모든 결정자가 후보키인 상태***를 말한다.
- **결정자**: 함수 종속 관계에서 특정 종속자를 결정짓는 요소를 말한다.

### 정규화는 무조건 좋은가?
- 정규화 과정을 거치더라도 조인으로 인해 성능이 좋아질 수도, 나빠질 수도 있다.
- 서비스에 따라 정규화 또는 비정규화 해야하는 상황을 판단할 필요가 있다.